# SBE Catalog Generator - Project Handover & Documentation

## 1. Project Overview
**Name:** SBE Catalog Generator (Gen PDF / SBE App)
**Purpose:** A tool for "Sri Brundabana Enterprises" to generate professional PDF catalogs and image sets for their footwear products.
**Core Philosophy:** 
- **Zero Backend Cost:** The app runs entirely client-side using static JSON data and Cloudinary images.
- **Premium Aesthetics:** Focus on UI/UX, animations, and clean design using Tailwind CSS.
- **Hybrid Deployment:** Works as a static website (GitHub Pages) AND a native Android App (via Capacitor).

## 2. Technology Stack
- **Framework:** Vue.js 3 (Vite)
- **Styling:** Tailwind CSS (Vanilla CSS for custom scrollbars/animations).
- **PDF Engine:** `jspdf` (Client-side vector PDF generation).
- **Mobile Wrapper:** `Capacitor` (wraps the web app into an Android WebView).
- **Data Source:** `axios` fetches a raw JSON file hosted on GitHub (`stock-data.json`).
- **Icons:** FontAwesome.

## 3. Key Functionalities

### A. PDF Generation (Client-Side)
- **Engine:** `jsPDF`.
- **Logic:** Located in `PdfGenerator.vue` -> `generatePdfBlob`.
- **Process:**
  1. Fetches `stock-data.json`.
  2. Iterates through selected brands.
  3. Downloads product images as Blobs (via `axios` + Cloudinary).
  4. Draws vector graphics (curves/waves) manually using `doc.path()`.
  5. Places text and images on an A4 canvas.
  6. Outputs a Blob for download or sharing.

### B. Android Native Sharing (The "WhatsApp" Feature)
- **Problem:** Browsers (Chrome/Safari) crash if you try to share 100+ images via `navigator.share`.
- **Solution:** We converted the site to an Android App using Capacitor.
- **Implementation:**
  1. `isNativeApp` computed property detects the environment.
  2. `shareViaNativeApp` function:
     - Generates images from the PDF pages onto an HTML Canvas.
     - Saves them to the device's temporary cache using `@capacitor/filesystem`.
     - Calls `@capacitor/share` with the array of file URIs.
  3. **Batching:** WhatsApp has a limit (approx 30-100 files). We implemented a "Batch Mode" that splits files into chunks of **99**.
     - If > 99 images: A modal appears ("Share Batch 1", "Share Batch 2").

## 4. Workflow & Deployment

### A. Web Development
Standard Vue workflow:
```bash
cd frontend
npm run dev
```

### B. Building the Android App (APK/AAB)
**Prerequisites:** Java JDK, Android SDK configured in `frontend/android/local.properties`.

**Steps to Build:**
1. **Compile Vue App:**
   ```bash
   cd frontend
   npm run build
   ```
   *Note:* `vite.config.js` uses `base: './'` to ensure assets load correctly in the Android WebView (avoiding white screen).

2. **Sync with Android Project:**
   ```bash
   npx cap sync
   ```
   This copies the `dist` folder into the Android project.

3.  **Build APK (For Testing):**
    ```bash
    cd android
    ./gradlew assembleRelease
    ```
    Output: `frontend/android/app/build/outputs/apk/release/app-release.apk`

4.  **Build AAB (For Play Store):**
    ```bash
    cd android
    ./gradlew bundleRelease
    ```
    Output: `frontend/android/app/build/outputs/bundle/release/app-release.aab`

### C. Signing (Keystore)
- The build is automatically signed using a keystore file.
- **Keystore File:** `frontend/android/app/upload-keystore.jks`
- **Credentials:** Stored in `frontend/android/keystore.properties` (Do not commit real passwords to public git, but for this private project they are local).
- **Config:** `frontend/android/app/build.gradle` is configured to read these properties and sign the `release` build type automatically.

## 5. Directory Structure
- `frontend/src/components/PdfGenerator.vue`: **The Brain.** Contains 99% of the logic (UI, PDF Gen, API calls, Sharing).
- `frontend/android/`: The Capacitor Android project (Gradle build scripts).
- `frontend/dist/`: The compiled web assets (generated by build).

## 6. Future Intentions
- **Maintainability:** Keep the app "Serverless". Do not introduce a Node.js backend unless absolutely necessary.
- **Data Updates:** To update products, just update the `stock-data.json` in the public repository. The app fetches it live.
- **UI:** Keep the "Premium" look. No basic Bootstrap styles.
- **Play Store:** If updating the app, remember to increment `versionCode` in `frontend/android/app/build.gradle` before building.

---
*Generated by Antigravity Agent - Jan 15, 2026*
